<!DOCTYPE html><html lang="en"><head><title>totem/addon/mixins/scope/record_helpers</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../"><meta name="groc-document-path" content="totem/addon/mixins/scope/record_helpers"><meta name="groc-project-path" content="totem/addon/mixins/scope/record_helpers.coffee"><meta name="groc-branch-path" content="development"><meta name="groc-github-url" content="https://github.com/sixthedge/etotem-client"><link rel="stylesheet" type="text/css" media="all" href="/assets/style.css"><script type="text/javascript" src="/assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/sixthedge/etotem-client/blob/development/totem/addon/mixins/scope/record_helpers.coffee">totem/addon/mixins/scope/record_helpers.coffee</a></div></div><div id="document"><a href="/" class="lodestar-link">Back to Guides</a><div class="segment"><div class="code"><div class="wrapper">import ember from <span class="hljs-string">'ember'</span>

export default ember.Mixin.create</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Return either a record or a string in the ember expected format.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">standard_record_path</span>: <span class="hljs-function"><span class="hljs-params">(path_or_record)</span> -&gt;</span>
    <span class="hljs-keyword">if</span> <span class="hljs-property">@is_string</span>(path_or_record) <span class="hljs-keyword">then</span> <span class="hljs-property">@rails_polymorphic_type_to_path</span>(path_or_record) <span class="hljs-keyword">else</span> <span class="hljs-property">@get_record_path</span>(path_or_record)</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Convert a rails polymorphic model type &#39;attribute&#39; to a path e.g. Some::Module::Model -&gt; some/module/model</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">rails_polymorphic_type_to_path</span>: <span class="hljs-function"><span class="hljs-params">(type)</span> -&gt;</span> type.underscore().replace(<span class="hljs-regexp">/::/g</span>,<span class="hljs-string">'/'</span>)

  <span class="hljs-attribute">record_is_deleted</span>: <span class="hljs-function"><span class="hljs-params">(record)</span> -&gt;</span> record.get(<span class="hljs-string">'isDeleted'</span>) <span class="hljs-keyword">or</span> record.get(<span class="hljs-string">'isDestroyed'</span>) <span class="hljs-keyword">or</span> record.get(<span class="hljs-string">'isDestroying'</span>)</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Return a record&#39;s type key to use in a store.find() or model_type.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">record_type_key</span>:   <span class="hljs-function"><span class="hljs-params">(record)</span> -&gt;</span> <span class="hljs-property">@record_model_name</span>(record) <span class="hljs-comment"># backward compatibility</span>
  <span class="hljs-attribute">record_model_name</span>: <span class="hljs-function"><span class="hljs-params">(record)</span> -&gt;</span> record.constructor.modelName</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Return a model class from a string that has the &#39;model_class.typeKey&#39; set.
The &#39;store.modelFor&#39; will normalize the string, so both a path (e.g. my/namespace/path/model)
or a model name (e.g. App.My.Namespace.Path.Model) will work.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">model_class_from_string</span>: <span class="hljs-function"><span class="hljs-params">(string)</span> -&gt;</span>  <span class="hljs-property">@get_store</span>().modelFor(string)

  <span class="hljs-attribute">model_class_type_key</span>:   <span class="hljs-function"><span class="hljs-params">(model_class)</span> -&gt;</span>  <span class="hljs-property">@model_class_model_name</span>(model_class) <span class="hljs-comment"># backward compatibility</span>
  <span class="hljs-attribute">model_class_model_name</span>: <span class="hljs-function"><span class="hljs-params">(model_class)</span> -&gt;</span>  ember.get(model_class, <span class="hljs-string">'modelName'</span>)</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Return a records&#39;s path by converting its model name to a path.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">get_record_path</span>: <span class="hljs-function"><span class="hljs-params">(record)</span> -&gt;</span> record <span class="hljs-keyword">and</span> <span class="hljs-property">@record_model_name</span>(record).underscore().replace(<span class="hljs-regexp">/\./g</span>,<span class="hljs-string">'/'</span>)</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Return array of integer ids.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">make_ids_array</span>: <span class="hljs-function"><span class="hljs-params">(ids)</span> -&gt;</span>
    ids = ember.makeArray(ids).map (id) -&gt; parseInt(id) <span class="hljs-keyword">or</span> <span class="hljs-literal">null</span>
    ids.compact()

  <span class="hljs-attribute">is_blank</span>:    <span class="hljs-function"><span class="hljs-params">(v)</span>  -&gt;</span> ember.isBlank(v)
  <span class="hljs-attribute">is_present</span>:  <span class="hljs-function"><span class="hljs-params">(v)</span>  -&gt;</span> ember.isPresent(v)
  <span class="hljs-attribute">is_string</span>:   <span class="hljs-function"><span class="hljs-params">(v)</span>  -&gt;</span> v  <span class="hljs-keyword">and</span> <span class="hljs-keyword">typeof</span> v  == <span class="hljs-string">'string'</span>
  <span class="hljs-attribute">is_function</span>: <span class="hljs-function"><span class="hljs-params">(fn)</span> -&gt;</span> fn <span class="hljs-keyword">and</span> <span class="hljs-keyword">typeof</span> fn == <span class="hljs-string">'function'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Return new concatenated id array; converts ids to integers.
Array params can be arrays or a string|integer (if not array, converted to an integer as a single element array)</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">concat_id_arrays</span>: <span class="hljs-function"><span class="hljs-params">(array_1, array_2)</span> -&gt;</span>
    array   = []
    array_1 = <span class="hljs-property">@make_ids_array</span>(array_1)
    array_2 = <span class="hljs-property">@make_ids_array</span>(array_2)
    array_1.forEach (value) -&gt; array.push value
    array_2.forEach (value) -&gt; array.push value
    array.uniq()</div></div></div></div></body></html>