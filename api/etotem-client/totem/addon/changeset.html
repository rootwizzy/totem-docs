<!DOCTYPE html><html lang="en"><head><title>totem/addon/changeset</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../"><meta name="groc-document-path" content="totem/addon/changeset"><meta name="groc-project-path" content="totem/addon/changeset.coffee"><meta name="groc-branch-path" content="development"><meta name="groc-github-url" content="https://github.com/sixthedge/etotem-client"><link rel="stylesheet" type="text/css" media="all" href="../../assets/style.css"><script type="text/javascript" src="../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/sixthedge/etotem-client/blob/development/totem/addon/changeset.coffee">totem/addon/changeset.coffee</a></div></div><div id="document"><a href="/" class="lodestar-link">Back to Guides</a><div class="segment"><div class="code"><div class="wrapper">import ember       from <span class="hljs-string">'ember'</span>
import util        from <span class="hljs-string">'totem/util'</span>
import totem_scope from <span class="hljs-string">'totem/scope'</span>
import {changeset} from <span class="hljs-string">'ember-changeset/index'</span>
import {validatePresence, validateLength, validateNumber} from <span class="hljs-string">'ember-changeset-validations/validators'</span>
import {validateExclusion, validateInclusion}             from <span class="hljs-string">'ember-changeset-validations/validators'</span>
import {validateConfirmation, validateFormat}             from <span class="hljs-string">'ember-changeset-validations/validators'</span>
import lookup_validator                                   from <span class="hljs-string">'ember-changeset-validations'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Totem Changeset Mixins:</p></div></div><div class="code"><div class="wrapper">import m_extend_changeset from <span class="hljs-string">'totem/mixins/changeset/extend_changeset'</span>
import m_validators       from <span class="hljs-string">'totem/mixins/changeset/validators'</span>
import m_numbers          from <span class="hljs-string">'totem/mixins/changeset/numbers'</span>
import m_vdecimals        from <span class="hljs-string">'totem/mixins/changeset/validators/decimals'</span>

totem_changeset = ember.Object.extend m_extend_changeset,
  m_numbers,
  m_vdecimals,
  m_validators,

  <span class="hljs-attribute">vpresence</span>:     <span class="hljs-function">-&gt;</span> validatePresence(arguments...)
  <span class="hljs-attribute">vlength</span>:       <span class="hljs-function">-&gt;</span> validateLength(arguments...)
  <span class="hljs-attribute">vnumber</span>:       <span class="hljs-function">-&gt;</span> validateNumber(arguments...)
  <span class="hljs-attribute">vexclusion</span>:    <span class="hljs-function">-&gt;</span> validateExclusion(arguments...)
  <span class="hljs-attribute">vinclusion</span>:    <span class="hljs-function">-&gt;</span> validateInclusion(arguments...)
  <span class="hljs-attribute">vconfirmation</span>: <span class="hljs-function">-&gt;</span> validateConfirmation(arguments...)
  <span class="hljs-attribute">vformat</span>:       <span class="hljs-function">-&gt;</span> validateFormat(arguments...)

  <span class="hljs-attribute">vurl</span>:   <span class="hljs-function"><span class="hljs-params">(hash={})</span> -&gt;</span> validateFormat(ember.merge(hash, {<span class="hljs-attribute">type</span>: <span class="hljs-string">'url'</span>}))
  <span class="hljs-attribute">vemail</span>: <span class="hljs-function"><span class="hljs-params">(hash={})</span> -&gt;</span> validateFormat(ember.merge(hash, {<span class="hljs-attribute">type</span>: <span class="hljs-string">'email'</span>}))</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Typically the &#39;obj&#39; is a model.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">create</span>: <span class="hljs-function"><span class="hljs-params">(obj, hash)</span>  -&gt;</span> <span class="hljs-property">@create_changeset</span> obj, lookup_validator(hash), hash
  <span class="hljs-attribute">no_validation</span>: <span class="hljs-function"><span class="hljs-params">(obj)</span> -&gt;</span> <span class="hljs-property">@create_changeset</span> obj, lookup_validator({}), {}

  <span class="hljs-attribute">create_changeset</span>: <span class="hljs-function">-&gt;</span>
    ember_changeset = changeset(arguments...)
    <span class="hljs-property">@extend_changeset</span>(ember_changeset).create()

export default totem_changeset.create()</div></div></div></div></body></html>