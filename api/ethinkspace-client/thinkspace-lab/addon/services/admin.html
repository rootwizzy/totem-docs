<!DOCTYPE html><html lang="en"><head><title>thinkspace-lab/addon/services/admin</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../"><meta name="groc-document-path" content="thinkspace-lab/addon/services/admin"><meta name="groc-project-path" content="thinkspace-lab/addon/services/admin.coffee"><meta name="groc-branch-path" content="feature/rap-analytics-styling"><meta name="groc-github-url" content="https://github.com/sixthedge/ethinkspace-client"><link rel="stylesheet" type="text/css" media="all" href="../../../assets/style.css"><script type="text/javascript" src="../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/sixthedge/ethinkspace-client/blob/feature/rap-analytics-styling/thinkspace-lab/addon/services/admin.coffee">thinkspace-lab/addon/services/admin.coffee</a></div></div><div id="document"><a href="/" class="lodestar-link">Back to Guides</a><div class="segment"><div class="code"><div class="wrapper">import ember from <span class="hljs-string">'ember'</span>
import ns    from <span class="hljs-string">'totem/ns'</span>
import ajax  from <span class="hljs-string">'totem/ajax'</span>
import totem_messages from <span class="hljs-string">'totem-messages/messages'</span>

export default ember.Service.extend

  <span class="hljs-attribute">test_ui_only</span>: <span class="hljs-literal">false</span>
  <span class="hljs-attribute">test_ui_on</span>:   <span class="hljs-function">-&gt;</span> <span class="hljs-property">@set</span> <span class="hljs-string">'test_ui_only'</span>, <span class="hljs-literal">true</span>
  <span class="hljs-attribute">test_ui_off</span>:  <span class="hljs-function">-&gt;</span> <span class="hljs-property">@set</span> <span class="hljs-string">'test_ui_only'</span>, <span class="hljs-literal">false</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="component-paths">Component Paths.</h3>
<h2 id="">#</h2></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="chart">Chart</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper">  <span class="hljs-attribute">c_chart_show</span>:      ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'chart'</span>, <span class="hljs-string">'show'</span>
  <span class="hljs-attribute">c_category_select</span>: ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'chart'</span>, <span class="hljs-string">'select_category'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="category">Category</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper">  <span class="hljs-attribute">c_category_show</span>:   ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'category'</span>, <span class="hljs-string">'show'</span>
  <span class="hljs-attribute">c_category_new</span>:    ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'category'</span>, <span class="hljs-string">'new'</span>
  <span class="hljs-attribute">c_category_edit</span>:   ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'category'</span>, <span class="hljs-string">'edit'</span>
  <span class="hljs-attribute">c_category_form</span>:   ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'category'</span>, <span class="hljs-string">'form'</span>
  <span class="hljs-attribute">c_category_delete</span>: ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'category'</span>, <span class="hljs-string">'destroy'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="result">Result</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper">  <span class="hljs-attribute">c_result_show</span>:      ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'result'</span>, <span class="hljs-string">'show'</span>
  <span class="hljs-attribute">c_result_edit</span>:      ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'result'</span>, <span class="hljs-string">'edit'</span>
  <span class="hljs-attribute">c_result_new</span>:       ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'result'</span>, <span class="hljs-string">'new'</span>
  <span class="hljs-attribute">c_result_form</span>:      ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'result'</span>, <span class="hljs-string">'form'</span>
  <span class="hljs-attribute">c_result_delete</span>:    ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'result'</span>, <span class="hljs-string">'destroy'</span>
  <span class="hljs-attribute">c_form_analysis</span>:    ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'result'</span>, <span class="hljs-string">'form'</span>, <span class="hljs-string">'analysis'</span>
  <span class="hljs-attribute">c_form_abnormality</span>: ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'result'</span>, <span class="hljs-string">'form'</span>, <span class="hljs-string">'abnormality'</span>
  <span class="hljs-attribute">c_form_input</span>:       ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'result'</span>, <span class="hljs-string">'form'</span>, <span class="hljs-string">'input'</span>
  <span class="hljs-attribute">c_form_range</span>:       ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'result'</span>, <span class="hljs-string">'form'</span>, <span class="hljs-string">'range'</span>
  <span class="hljs-attribute">c_form_html</span>:        ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'result'</span>, <span class="hljs-string">'form'</span>, <span class="hljs-string">'html'</span>
  <span class="hljs-attribute">c_form_correctable</span>: ns.to_p <span class="hljs-string">'lab'</span>, <span class="hljs-string">'builder'</span>, <span class="hljs-string">'lab'</span>, <span class="hljs-string">'result'</span>, <span class="hljs-string">'form'</span>, <span class="hljs-string">'correctable'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="common">Common.</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper">  <span class="hljs-attribute">c_validated_input</span>:       ns.to_p <span class="hljs-string">'common'</span>, <span class="hljs-string">'shared'</span>, <span class="hljs-string">'validated_input'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>c_dropdown_split_button: ns.to_p &#39;common&#39;, &#39;dropdown_split_button&#39;</p></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="chart-send-requests">Chart Send Requests.</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">load_chart</span>: <span class="hljs-function">-&gt;</span>
    promise = <span class="hljs-keyword">new</span> ember.RSVP.Promise (resolve, reject) =&gt;
      chart = <span class="hljs-property">@get_chart</span>()
      query =
        <span class="hljs-attribute">model</span>:  chart
        <span class="hljs-attribute">id</span>:     chart.get(<span class="hljs-string">'id'</span>)
        <span class="hljs-attribute">verb</span>:   <span class="hljs-string">'get'</span>
        <span class="hljs-attribute">action</span>: <span class="hljs-string">'load'</span>
      ajax.object(query).<span class="hljs-keyword">then</span> (payload) =&gt;
        <span class="hljs-property">@tc</span>.push_payload(payload)
        resolve()
      , <span class="hljs-function"><span class="hljs-params">(error)</span> =&gt;</span>
        reject(error)

  <span class="hljs-attribute">reorder_chart_categories</span>: <span class="hljs-function"><span class="hljs-params">(changes)</span> -&gt;</span>
    <span class="hljs-keyword">new</span> ember.RSVP.Promise (resolve, reject) =&gt;
      chart = <span class="hljs-property">@get_chart</span>()
      query =
        <span class="hljs-attribute">model</span>:  chart
        <span class="hljs-attribute">id</span>:     chart.get(<span class="hljs-string">'id'</span>)
        <span class="hljs-attribute">action</span>: <span class="hljs-string">'category_positions'</span>
        <span class="hljs-attribute">verb</span>:   <span class="hljs-string">'post'</span>
        <span class="hljs-attribute">data</span>:
          <span class="hljs-attribute">category_positions</span>: changes
      <span class="hljs-keyword">return</span> resolve()  <span class="hljs-keyword">if</span> <span class="hljs-property">@get</span>(<span class="hljs-string">'test_ui_only'</span>)
      totem_messages.show_loading_outlet()
      ajax.object(query).<span class="hljs-keyword">then</span> =&gt;
        totem_messages.hide_loading_outlet()
        resolve()
      , <span class="hljs-function"><span class="hljs-params">(error)</span> =&gt;</span>
        reject(error)</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="category-send-requests">Category Send Requests.</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">save_category</span>: <span class="hljs-function"><span class="hljs-params">(category, options={})</span> -&gt;</span>
    <span class="hljs-keyword">new</span> ember.RSVP.Promise (resolve, reject) =&gt;
      values = options.values
      <span class="hljs-property">@clone_category_values</span>(category, values, options)  <span class="hljs-keyword">if</span> ember.isPresent(values)
      category.get(ns.to_p <span class="hljs-string">'lab:chart'</span>).<span class="hljs-keyword">then</span> (chart) =&gt;
        <span class="hljs-keyword">if</span> ember.isBlank(chart)
          category.set ns.to_p(<span class="hljs-string">'lab:chart'</span>), <span class="hljs-property">@get_chart</span>()
        <span class="hljs-keyword">return</span> resolve()  <span class="hljs-keyword">if</span> <span class="hljs-property">@get</span>(<span class="hljs-string">'test_ui_only'</span>)
        totem_messages.show_loading_outlet()
        category.save().<span class="hljs-keyword">then</span> (category) =&gt;
          totem_messages.hide_loading_outlet()
          resolve(category)
        , <span class="hljs-function"><span class="hljs-params">(error)</span> =&gt;</span>
          totem_messages.api_failure error, <span class="hljs-attribute">source</span>: @, <span class="hljs-attribute">model</span>: category, <span class="hljs-attribute">action</span>: <span class="hljs-string">'save'</span>

  <span class="hljs-attribute">delete_category</span>: <span class="hljs-function">-&gt;</span>
    <span class="hljs-keyword">new</span> ember.RSVP.Promise (resolve, reject) =&gt;
      category = <span class="hljs-property">@get_selected_category</span>()
      <span class="hljs-keyword">return</span> resolve() <span class="hljs-keyword">if</span> ember.isBlank(category)
      <span class="hljs-keyword">if</span> <span class="hljs-property">@get</span>(<span class="hljs-string">'test_ui_only'</span>)
        category.unloadRecord()
        <span class="hljs-keyword">return</span> resolve()
      category.deleteRecord()
      totem_messages.show_loading_outlet()
      category.save().<span class="hljs-keyword">then</span> =&gt;
          totem_messages.hide_loading_outlet()
          resolve(category)
        , <span class="hljs-function"><span class="hljs-params">(error)</span> =&gt;</span>
          totem_messages.api_failure error, <span class="hljs-attribute">source</span>: @, <span class="hljs-attribute">model</span>: category, <span class="hljs-attribute">action</span>: <span class="hljs-string">'delete'</span>

  <span class="hljs-attribute">reorder_category_results</span>: <span class="hljs-function"><span class="hljs-params">(changes)</span> -&gt;</span>
    <span class="hljs-keyword">new</span> ember.RSVP.Promise (resolve, reject) =&gt;
      category = <span class="hljs-property">@get_selected_category</span>()
      query =
        <span class="hljs-attribute">model</span>:  category
        <span class="hljs-attribute">id</span>:     category.get(<span class="hljs-string">'id'</span>)
        <span class="hljs-attribute">action</span>: <span class="hljs-string">'result_positions'</span>
        <span class="hljs-attribute">verb</span>:   <span class="hljs-string">'post'</span>
        <span class="hljs-attribute">data</span>:
          <span class="hljs-attribute">result_positions</span>: changes
      <span class="hljs-keyword">return</span> resolve()  <span class="hljs-keyword">if</span> <span class="hljs-property">@get</span>(<span class="hljs-string">'test_ui_only'</span>)
      ajax.object(query).<span class="hljs-keyword">then</span> =&gt;
        resolve()
      , <span class="hljs-function"><span class="hljs-params">(error)</span> =&gt;</span>
        reject(error)

  <span class="hljs-attribute">clone_category_values</span>: <span class="hljs-function"><span class="hljs-params">(category, values, options={})</span> -&gt;</span>
    props =
      <span class="hljs-attribute">title</span>:    values.get(<span class="hljs-string">'title'</span>)
      <span class="hljs-attribute">position</span>: values.get(<span class="hljs-string">'position'</span>)
      <span class="hljs-attribute">value</span>:    values.get(<span class="hljs-string">'value'</span>)
    options_props = options.properties
    props         = ember.merge(props, options_props)  <span class="hljs-keyword">if</span> options_props
    category.setProperties(props)
    category</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="result-send-requests">Result Send Requests.</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">save_result</span>: <span class="hljs-function"><span class="hljs-params">(result, options={})</span> -&gt;</span>
    <span class="hljs-keyword">new</span> ember.RSVP.Promise (resolve, reject) =&gt;
      values = options.values
      <span class="hljs-property">@clone_result_values</span>(result, values, options)  <span class="hljs-keyword">if</span> ember.isPresent(values)
      result.get(ns.to_p <span class="hljs-string">'lab:category'</span>).<span class="hljs-keyword">then</span> (category) =&gt;
        <span class="hljs-keyword">if</span> ember.isBlank(category)
          category = <span class="hljs-property">@get_selected_category</span>()
          <span class="hljs-keyword">return</span> reject(<span class="hljs-string">'Selected category is blank.'</span>)  <span class="hljs-keyword">if</span> ember.isBlank(category)
          result.set ns.to_p(<span class="hljs-string">'lab:category'</span>), category
        <span class="hljs-keyword">return</span> resolve()  <span class="hljs-keyword">if</span> <span class="hljs-property">@get</span>(<span class="hljs-string">'test_ui_only'</span>)
        totem_messages.show_loading_outlet()
        result.save().<span class="hljs-keyword">then</span> (result) =&gt;
          totem_messages.hide_loading_outlet()
          resolve(result)
        , <span class="hljs-function"><span class="hljs-params">(error)</span> =&gt;</span>
          totem_messages.api_failure error, <span class="hljs-attribute">source</span>: @, <span class="hljs-attribute">model</span>: result, <span class="hljs-attribute">action</span>: <span class="hljs-string">'save'</span>

  <span class="hljs-attribute">delete_result</span>: <span class="hljs-function">-&gt;</span>
    <span class="hljs-keyword">new</span> ember.RSVP.Promise (resolve, reject) =&gt;
      result = <span class="hljs-property">@get_action_overlay_model</span>()
      <span class="hljs-keyword">return</span> resolve() <span class="hljs-keyword">if</span> ember.isBlank(result)
      <span class="hljs-keyword">if</span> <span class="hljs-property">@get</span>(<span class="hljs-string">'test_ui_only'</span>)
        result.unloadRecord()
        <span class="hljs-keyword">return</span> resolve()
      result.deleteRecord()
      totem_messages.show_loading_outlet()
      result.save().<span class="hljs-keyword">then</span> =&gt;
          totem_messages.hide_loading_outlet()
          resolve(result)
        , <span class="hljs-function"><span class="hljs-params">(error)</span> =&gt;</span>
          totem_messages.api_failure error, <span class="hljs-attribute">source</span>: @, <span class="hljs-attribute">model</span>: result, <span class="hljs-attribute">action</span>: <span class="hljs-string">'delete'</span>

  <span class="hljs-attribute">clone_result_values</span>: <span class="hljs-function"><span class="hljs-params">(result, values, options={})</span> -&gt;</span>
    props =
      <span class="hljs-attribute">title</span>:    values.get(<span class="hljs-string">'title'</span>)
      <span class="hljs-attribute">position</span>: values.get(<span class="hljs-string">'position'</span>)
      <span class="hljs-attribute">metadata</span>: values.get(<span class="hljs-string">'metadata'</span>)
      <span class="hljs-attribute">value</span>:    values.get(<span class="hljs-string">'value'</span>)
    options_props = options.properties
    props         = ember.merge(props, options_props)  <span class="hljs-keyword">if</span> options_props
    result.setProperties(props)
    result</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="sortables">Sortables.</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">category_sortable_selector</span>: <span class="hljs-string">'.ts-lab_admin-sortable-categories'</span>
  <span class="hljs-attribute">result_sortable_selector</span>:   <span class="hljs-string">'.ts-lab_admin-sortable-results'</span>

  <span class="hljs-attribute">get_category_sortable_selector</span>: <span class="hljs-function">-&gt;</span> <span class="hljs-property">@get</span>(<span class="hljs-string">'category_sortable_selector'</span>)
  <span class="hljs-attribute">get_result_sortable_selector</span>:   <span class="hljs-function">-&gt;</span> <span class="hljs-property">@get</span>(<span class="hljs-string">'result_sortable_selector'</span>)

  <span class="hljs-attribute">on_drop_category_reorder</span>: <span class="hljs-function"><span class="hljs-params">(options={})</span> -&gt;</span>
    <span class="hljs-keyword">new</span> ember.RSVP.Promise (resolve, reject) =&gt;
      chart = <span class="hljs-property">@get_chart</span>()
      <span class="hljs-property">@get_chart_categories</span>().<span class="hljs-keyword">then</span> (categories) =&gt;
        selector = <span class="hljs-property">@get_category_sortable_selector</span>()
        changes  = <span class="hljs-property">@find_and_set_reorder_changes</span>(selector, categories, <span class="hljs-string">'li'</span>)</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>console.info &#39;category changes:&#39;, changes</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">return</span> resolve()  <span class="hljs-keyword">if</span> ember.isBlank(changes)
        component   = options.component
        notify_prop = options.notify
        <span class="hljs-keyword">if</span> component <span class="hljs-keyword">and</span> notify_prop
          component.notifyPropertyChange(notify_prop)
        <span class="hljs-property">@reorder_chart_categories</span>(changes).<span class="hljs-keyword">then</span> =&gt; resolve()

  <span class="hljs-attribute">on_drop_result_reorder</span>: <span class="hljs-function"><span class="hljs-params">(options={})</span> -&gt;</span>
    <span class="hljs-keyword">new</span> ember.RSVP.Promise (resolve, reject) =&gt;
      <span class="hljs-property">@get_category_results</span>().<span class="hljs-keyword">then</span> (results) =&gt;
        selector = <span class="hljs-property">@get_result_sortable_selector</span>() + <span class="hljs-string">':visible'</span>
        changes  = <span class="hljs-property">@find_and_set_reorder_changes</span>(selector, results, <span class="hljs-string">'tr'</span>)</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>console.info &#39;result changes:&#39;, changes</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">return</span> resolve()  <span class="hljs-keyword">if</span> ember.isBlank(changes)
        component   = options.component
        notify_prop = options.notify
        <span class="hljs-keyword">if</span> component <span class="hljs-keyword">and</span> notify_prop
          component.notifyPropertyChange(notify_prop)
        <span class="hljs-property">@reorder_category_results</span>(changes).<span class="hljs-keyword">then</span> =&gt; resolve()

  <span class="hljs-attribute">find_and_set_reorder_changes</span>: <span class="hljs-function"><span class="hljs-params">(selector, records, tag)</span> -&gt;</span>
    $items  = $(selector).find(tag)
    changes = []
    $items.each (index, child) =&gt;
      rec_pos = index + <span class="hljs-number">1</span>
      $child  = $(child)
      id      = $child.attr(<span class="hljs-string">'model_id'</span>)
      record  = records.findBy <span class="hljs-string">'id'</span>, id
      <span class="hljs-keyword">if</span> record
        position = record.get(<span class="hljs-string">'position'</span>)
        <span class="hljs-keyword">unless</span> position == rec_pos
          record.set <span class="hljs-string">'position'</span>, rec_pos
          changes.push {<span class="hljs-attribute">id</span>: id, <span class="hljs-attribute">position</span>: rec_pos}
    changes</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="base-properties">Base Properties.</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">store</span>:           <span class="hljs-literal">null</span>
  <span class="hljs-attribute">chart</span>:           <span class="hljs-literal">null</span>
  <span class="hljs-attribute">admin_component</span>: <span class="hljs-literal">null</span>

  <span class="hljs-attribute">selected_category</span>:          <span class="hljs-literal">null</span>
  <span class="hljs-attribute">selected_category_columns</span>:  <span class="hljs-literal">null</span>
  <span class="hljs-attribute">selected_category_headings</span>: <span class="hljs-literal">null</span>

  <span class="hljs-attribute">get_store</span>:         <span class="hljs-function">-&gt;</span> <span class="hljs-property">@get</span> <span class="hljs-string">'store'</span>
  <span class="hljs-attribute">set_store</span>: <span class="hljs-function"><span class="hljs-params">(store)</span> -&gt;</span> <span class="hljs-property">@set</span> <span class="hljs-string">'store'</span>, store

  <span class="hljs-attribute">get_chart</span>:         <span class="hljs-function">-&gt;</span> <span class="hljs-property">@get</span> <span class="hljs-string">'chart'</span>
  <span class="hljs-attribute">set_chart</span>: <span class="hljs-function"><span class="hljs-params">(chart)</span> -&gt;</span> <span class="hljs-property">@set</span> <span class="hljs-string">'chart'</span>, chart

  <span class="hljs-attribute">get_admin_component</span>:             <span class="hljs-function">-&gt;</span> <span class="hljs-property">@get</span> <span class="hljs-string">'admin_component'</span>
  <span class="hljs-attribute">set_admin_component</span>: <span class="hljs-function"><span class="hljs-params">(component)</span> -&gt;</span> <span class="hljs-property">@set</span> <span class="hljs-string">'admin_component'</span>, component

  <span class="hljs-attribute">reset_selected_category</span>: <span class="hljs-function">-&gt;</span> <span class="hljs-property">@set_selected_category</span> <span class="hljs-property">@get_selected_category</span>()

  <span class="hljs-attribute">get_selected_category</span>: <span class="hljs-function">-&gt;</span> <span class="hljs-property">@get</span>(<span class="hljs-string">'selected_category'</span>)
  <span class="hljs-attribute">set_selected_category</span>: <span class="hljs-function"><span class="hljs-params">(category)</span> -&gt;</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> ember.isBlank(category)
    columns  = <span class="hljs-property">@category_columns</span>(category)
    headings = columns.map (column) -&gt; column.heading
    <span class="hljs-property">@setProperties</span>
      <span class="hljs-attribute">selected_category</span>:          category
      <span class="hljs-attribute">selected_category_columns</span>:  columns
      <span class="hljs-attribute">selected_category_headings</span>: headings

  <span class="hljs-attribute">get_selected_category_columns</span>: <span class="hljs-function">-&gt;</span> <span class="hljs-property">@get</span>(<span class="hljs-string">'selected_category_columns'</span>) <span class="hljs-keyword">or</span> []

  <span class="hljs-attribute">exit</span>: <span class="hljs-function">-&gt;</span> <span class="hljs-property">@get_admin_component</span>().send(<span class="hljs-string">'exit'</span>)

  <span class="hljs-attribute">clear</span>: <span class="hljs-function">-&gt;</span>
    <span class="hljs-property">@set_action_overlay_off</span>()
    <span class="hljs-property">@setProperties</span>
      <span class="hljs-attribute">selected_category</span>:          <span class="hljs-literal">null</span>
      <span class="hljs-attribute">selected_category_columns</span>:  <span class="hljs-literal">null</span>
      <span class="hljs-attribute">selected_category_headings</span>: <span class="hljs-literal">null</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="action-overlay-properties">Action Overlay Properties.</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">has_action_overlay</span>: <span class="hljs-literal">false</span>

  <span class="hljs-attribute">c_action_overlay</span>:       <span class="hljs-literal">null</span>
  <span class="hljs-attribute">action_overlay_model</span>:   <span class="hljs-literal">null</span>
  <span class="hljs-attribute">result_form_components</span>: []

  <span class="hljs-attribute">new_result_type</span>:             <span class="hljs-literal">null</span>
  <span class="hljs-attribute">result_value_edit_component</span>: <span class="hljs-literal">null</span>
  <span class="hljs-attribute">result_value_edit_model</span>:     <span class="hljs-literal">null</span>

  <span class="hljs-attribute">set_action_overlay_off</span>: <span class="hljs-function">-&gt;</span>
    <span class="hljs-property">@set</span> <span class="hljs-string">'has_action_overlay'</span>, <span class="hljs-literal">false</span>
    ember.run.schedule <span class="hljs-string">'afterRender'</span>, <span class="hljs-function">=&gt;</span> <span class="hljs-property">@clear_overlay_values</span>()

  <span class="hljs-attribute">set_action_overlay</span>: <span class="hljs-function"><span class="hljs-params">(component_name)</span> -&gt;</span>
    name = <span class="hljs-property">@get</span>(component_name)
    <span class="hljs-property">@set</span> <span class="hljs-string">'c_action_overlay'</span>, name
    <span class="hljs-property">@set</span> <span class="hljs-string">'has_action_overlay'</span>, <span class="hljs-literal">true</span>

  <span class="hljs-attribute">get_action_overlay_model</span>:          <span class="hljs-function">-&gt;</span> <span class="hljs-property">@get</span> <span class="hljs-string">'action_overlay_model'</span>
  <span class="hljs-attribute">set_action_overlay_model</span>: <span class="hljs-function"><span class="hljs-params">(record)</span> -&gt;</span> <span class="hljs-property">@set</span> <span class="hljs-string">'action_overlay_model'</span>, record

  <span class="hljs-attribute">is_result_value_edit_component</span>: <span class="hljs-function"><span class="hljs-params">(component)</span> -&gt;</span>
    result = component.get(<span class="hljs-string">'model'</span>)
    component == <span class="hljs-property">@get</span>(<span class="hljs-string">'result_value_edit_component'</span>) <span class="hljs-keyword">and</span> <span class="hljs-property">@guid_for</span>(result) == <span class="hljs-property">@get</span>(<span class="hljs-string">'result_value_edit_model'</span>)

  <span class="hljs-attribute">set_result_value_edit_component</span>: <span class="hljs-function"><span class="hljs-params">(component)</span> -&gt;</span>
    prev_component = <span class="hljs-property">@get</span>(<span class="hljs-string">'result_value_edit_component'</span>)
    prev_component.rollback()  <span class="hljs-keyword">if</span> ember.isPresent(prev_component)  <span class="hljs-comment"># clicked on another result value (e.g. did not select cancel)</span>
    <span class="hljs-property">@setProperties</span>
      <span class="hljs-attribute">result_value_edit_component</span>: component
      <span class="hljs-attribute">result_value_edit_model</span>:     <span class="hljs-property">@guid_for</span> component.get(<span class="hljs-string">'model'</span>)

  <span class="hljs-attribute">get_result_form_components</span>:            <span class="hljs-function">-&gt;</span> <span class="hljs-property">@get</span>(<span class="hljs-string">'result_form_components'</span>)
  <span class="hljs-attribute">add_result_form_component</span>: <span class="hljs-function"><span class="hljs-params">(component)</span> -&gt;</span> <span class="hljs-property">@get_result_form_components</span>().push(component)

  <span class="hljs-attribute">guid_for</span>: <span class="hljs-function"><span class="hljs-params">(object)</span> -&gt;</span> ember.guidFor(object)

  <span class="hljs-attribute">set_edit_result_has_errors</span>: <span class="hljs-function"><span class="hljs-params">(errors=<span class="hljs-literal">true</span>)</span> -&gt;</span> <span class="hljs-property">@set</span> <span class="hljs-string">'edit_result_has_errors'</span>, errors

  <span class="hljs-attribute">clear_overlay_values</span>: <span class="hljs-function">-&gt;</span>
    <span class="hljs-property">@setProperties</span>
      <span class="hljs-attribute">new_result_type</span>:             <span class="hljs-literal">null</span>
      <span class="hljs-attribute">result_value_edit_component</span>: <span class="hljs-literal">null</span>
      <span class="hljs-attribute">result_value_edit_model</span>:     <span class="hljs-literal">null</span>
      <span class="hljs-attribute">result_form_components</span>:      []
      <span class="hljs-attribute">action_overlay_model</span>:        <span class="hljs-literal">null</span>
      <span class="hljs-attribute">c_action_overlay</span>:            <span class="hljs-literal">null</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="chart">Chart.</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">set_chart_selected_category</span>: <span class="hljs-function">-&gt;</span>
    <span class="hljs-keyword">new</span> ember.RSVP.Promise (resolve, reject) =&gt;
      <span class="hljs-property">@get_chart_categories</span>().<span class="hljs-keyword">then</span> (categories) =&gt;
        selected_category = categories.sortBy(<span class="hljs-string">'position'</span>).get(<span class="hljs-string">'firstObject'</span>)
        <span class="hljs-property">@set_selected_category</span>(selected_category)  <span class="hljs-keyword">if</span> selected_category
        resolve()

  <span class="hljs-attribute">get_chart_categories</span>: <span class="hljs-function">-&gt;</span>
    <span class="hljs-keyword">new</span> ember.RSVP.Promise (resolve, reject) =&gt;
      chart = <span class="hljs-property">@get_chart</span>()
      <span class="hljs-keyword">return</span> reject()  <span class="hljs-keyword">if</span> ember.isBlank(chart)
      chart.get(ns.to_p <span class="hljs-string">'lab:categories'</span>).<span class="hljs-keyword">then</span> (categories) =&gt;
        resolve(categories)
      , <span class="hljs-function"><span class="hljs-params">(error)</span> =&gt;</span> reject()</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="category">Category.</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">get_category_results</span>: <span class="hljs-function">-&gt;</span>
    <span class="hljs-keyword">new</span> ember.RSVP.Promise (resolve, reject) =&gt;
      category = <span class="hljs-property">@get_selected_category</span>()
      <span class="hljs-keyword">return</span> reject()  <span class="hljs-keyword">if</span> ember.isBlank(category)
      category.get(ns.to_p <span class="hljs-string">'lab:results'</span>).<span class="hljs-keyword">then</span> (results) =&gt;
        resolve(results)
      , <span class="hljs-function"><span class="hljs-params">(error)</span> =&gt;</span> reject()

  <span class="hljs-attribute">mock_new_category_record</span>: ember.Object.extend
    <span class="hljs-attribute">columns</span>:             ember.computed.reads <span class="hljs-string">'value.columns'</span>
    <span class="hljs-attribute">description_heading</span>: ember.computed -&gt; <span class="hljs-property">@get</span>(<span class="hljs-string">'value.description'</span>) <span class="hljs-keyword">or</span> <span class="hljs-string">'Description'</span>
    <span class="hljs-attribute">toString</span>: <span class="hljs-function">-&gt;</span> <span class="hljs-string">'mock_lab_category'</span>

  <span class="hljs-attribute">category_columns</span>: <span class="hljs-function"><span class="hljs-params">(category)</span> -&gt;</span>
    columns         = []
    cat_columns     = category.get(<span class="hljs-string">'columns'</span>) <span class="hljs-keyword">or</span> []
    has_description = <span class="hljs-literal">false</span>
    cat_columns.map (cat_column) =&gt;
      column          = ember.merge {}, cat_column
      has_description = <span class="hljs-literal">true</span> <span class="hljs-keyword">if</span> column.source == <span class="hljs-string">'description'</span>
      columns.push(column)
    <span class="hljs-keyword">unless</span> has_description
      columns.push({<span class="hljs-attribute">heading</span>: category.get(<span class="hljs-string">'description_heading'</span>), <span class="hljs-attribute">source</span>: <span class="hljs-string">'description'</span>})
    columns

  <span class="hljs-attribute">get_mock_new_category_record</span>: <span class="hljs-function">-&gt;</span>
    <span class="hljs-property">@get</span>(<span class="hljs-string">'mock_new_category_record'</span>).create <span class="hljs-property">@category_new_defaults</span>()

  <span class="hljs-attribute">category_new_defaults</span>: <span class="hljs-function">-&gt;</span>
    <span class="hljs-attribute">title</span>:    <span class="hljs-string">''</span>
    <span class="hljs-attribute">position</span>: <span class="hljs-number">0</span>
    <span class="hljs-attribute">value</span>:
      <span class="hljs-attribute">component</span>:           <span class="hljs-string">'vet_med'</span>
      <span class="hljs-attribute">description_heading</span>: <span class="hljs-property">@i18n_category_heading</span>(<span class="hljs-string">'description'</span>)
      <span class="hljs-attribute">correctable_prompt</span>:  <span class="hljs-property">@t</span>(<span class="hljs-string">'builder.lab.category.correctable_prompt'</span>)
      <span class="hljs-attribute">columns</span>: [
        {<span class="hljs-attribute">heading</span>: <span class="hljs-property">@i18n_category_heading</span>(<span class="hljs-string">'result_name'</span>), <span class="hljs-attribute">source</span>: <span class="hljs-string">'title'</span>}
        {<span class="hljs-attribute">heading</span>: <span class="hljs-property">@i18n_category_heading</span>(<span class="hljs-string">'result'</span>),      <span class="hljs-attribute">source</span>: <span class="hljs-string">'result'</span>}
        {<span class="hljs-attribute">heading</span>: <span class="hljs-property">@i18n_category_heading</span>(<span class="hljs-string">'units'</span>),       <span class="hljs-attribute">source</span>: <span class="hljs-string">'units'</span>}
        {<span class="hljs-attribute">heading</span>: <span class="hljs-property">@i18n_category_heading</span>(<span class="hljs-string">'range'</span>),       <span class="hljs-attribute">source</span>: <span class="hljs-string">'ratings'</span>, <span class="hljs-attribute">range</span>: <span class="hljs-literal">true</span>}
        {<span class="hljs-attribute">heading</span>: <span class="hljs-property">@i18n_category_heading</span>(<span class="hljs-string">'analysis'</span>),    <span class="hljs-attribute">observation</span>: <span class="hljs-string">'analysis'</span>}
        {<span class="hljs-attribute">heading</span>: <span class="hljs-property">@i18n_category_heading</span>(<span class="hljs-string">'abnormality'</span>), <span class="hljs-attribute">observation</span>: <span class="hljs-string">'abnormality'</span>}
      ]

  <span class="hljs-attribute">category_clone</span>: <span class="hljs-function"><span class="hljs-params">(category)</span> -&gt;</span>
    chart  = <span class="hljs-property">@get</span>(<span class="hljs-string">'chart'</span>)
    clone = <span class="hljs-property">@tc</span>.create_record ns.to_p(<span class="hljs-string">'lab:category'</span>)
    <span class="hljs-property">@set_clone_category_values</span>(clone, category)
    clone.set ns.to_p(<span class="hljs-string">'lab:chart'</span>), chart
    chart.get(ns.to_p <span class="hljs-string">'lab:categories'</span>).<span class="hljs-keyword">then</span> (categories) =&gt;
      categories.pushObject(clone)
      <span class="hljs-property">@get</span>(<span class="hljs-string">'admin'</span>).set_selected_category(clone)
      <span class="hljs-property">@send</span> <span class="hljs-string">'clear_action_overlay'</span>

  <span class="hljs-attribute">i18n_category_heading</span>: <span class="hljs-function"><span class="hljs-params">(key)</span> -&gt;</span> <span class="hljs-property">@t</span>(<span class="hljs-string">"builder.lab.category.heading.<span class="hljs-subst">#{key}</span>"</span>)</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="result">Result.</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">result_title_column</span>: <span class="hljs-function">-&gt;</span> <span class="hljs-property">@get_selected_category_columns</span>().findBy <span class="hljs-string">'source'</span>, <span class="hljs-string">'title'</span>

  <span class="hljs-attribute">result_type_columns</span>: <span class="hljs-function"><span class="hljs-params">(result, type)</span> -&gt;</span>
    columns = []
    <span class="hljs-keyword">switch</span> type
      <span class="hljs-keyword">when</span> <span class="hljs-string">'result'</span>           <span class="hljs-keyword">then</span> <span class="hljs-property">@add_result_columns</span>(columns)
      <span class="hljs-keyword">when</span> <span class="hljs-string">'adjusted_result'</span>  <span class="hljs-keyword">then</span> <span class="hljs-property">@add_adjusted_result_columns</span>(columns)
      <span class="hljs-keyword">when</span> <span class="hljs-string">'html_result'</span>      <span class="hljs-keyword">then</span> <span class="hljs-property">@add_html_result_columns</span>(columns)
    <span class="hljs-property">@result_columns</span>(columns, result)

  <span class="hljs-attribute">result_columns</span>: <span class="hljs-function"><span class="hljs-params">(columns, result)</span> -&gt;</span>
    <span class="hljs-keyword">return</span> [] <span class="hljs-keyword">unless</span> columns
    columns.map (col) =&gt;
      column = ember.merge {}, col
      <span class="hljs-property">@set_component_values</span>(column, result)

  <span class="hljs-attribute">set_component_values</span>: <span class="hljs-function"><span class="hljs-params">(column, result)</span> -&gt;</span>
    <span class="hljs-keyword">if</span> column.observation
      column.fieldset = <span class="hljs-literal">true</span>
      <span class="hljs-keyword">switch</span> column.observation
        <span class="hljs-keyword">when</span> <span class="hljs-string">'analysis'</span>
          column.component  = <span class="hljs-property">@get</span>(<span class="hljs-string">'c_form_analysis'</span>)
          column.value_path = [<span class="hljs-string">'value.observations.analysis.selections'</span>, <span class="hljs-string">'value.observations.analysis.normal'</span>, <span class="hljs-string">'metadata.analysis.validate.correct'</span>]
        <span class="hljs-keyword">when</span> <span class="hljs-string">'abnormality'</span>
          column.component  = <span class="hljs-property">@get</span>(<span class="hljs-string">'c_form_abnormality'</span>)
          column.value_path = [<span class="hljs-string">'metadata.abnormality.validate.correct'</span>, <span class="hljs-string">'metadata.abnormality.max_attempts'</span>]
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">if</span> ember.isPresent(column.correctable)
        column.fieldset   = <span class="hljs-literal">true</span>
        column.value_path = [<span class="hljs-string">'metadata.analysis.validate.correct'</span>, <span class="hljs-string">'metadata.analysis.max_attempts'</span>]
      <span class="hljs-keyword">else</span>
        column.fieldset = <span class="hljs-literal">false</span>
      <span class="hljs-keyword">switch</span> column.source
        <span class="hljs-keyword">when</span> <span class="hljs-string">'title'</span>
          column.component  = <span class="hljs-property">@get</span>(<span class="hljs-string">'c_form_input'</span>)
          column.value_path = <span class="hljs-string">'title'</span>
        <span class="hljs-keyword">when</span> <span class="hljs-string">'description'</span>
          column.component  = <span class="hljs-property">@get</span>(<span class="hljs-string">'c_form_input'</span>)
          column.value_path = <span class="hljs-string">'value.description'</span>
        <span class="hljs-keyword">when</span> <span class="hljs-string">'result'</span>
          column.component  = <span class="hljs-property">@get</span>(<span class="hljs-string">'c_form_input'</span>)
          column.value_path = <span class="hljs-string">'value.columns.result'</span>
          column.component  = <span class="hljs-property">@get</span>(<span class="hljs-string">'c_form_html'</span>)  <span class="hljs-keyword">if</span> result.get(<span class="hljs-string">'admin_is_html'</span>)
        <span class="hljs-keyword">when</span> <span class="hljs-string">'units'</span>
          column.component  = <span class="hljs-property">@get</span>(<span class="hljs-string">'c_form_input'</span>)
          column.value_path = <span class="hljs-string">'value.columns.units'</span>
        <span class="hljs-keyword">when</span> <span class="hljs-string">'ratings'</span>
          <span class="hljs-keyword">if</span> column.range
            column.component  = <span class="hljs-property">@get</span>(<span class="hljs-string">'c_form_range'</span>)
            column.value_path = [<span class="hljs-string">'value.columns.ratings.lower'</span>, <span class="hljs-string">'value.columns.ratings.upper'</span>]
            column.fieldset   = <span class="hljs-literal">true</span>
          <span class="hljs-keyword">else</span>
            column.component  = <span class="hljs-property">@get</span>(<span class="hljs-string">'c_form_input'</span>)
            column.value_path = <span class="hljs-string">'value.columns.ratings'</span>
    column

  <span class="hljs-attribute">result_sources</span>:      [<span class="hljs-string">'description'</span>, <span class="hljs-string">'result'</span>, <span class="hljs-string">'units'</span>, <span class="hljs-string">'ratings'</span>]
  <span class="hljs-attribute">result_observations</span>: [<span class="hljs-string">'analysis'</span>, <span class="hljs-string">'abnormality'</span>]

  <span class="hljs-attribute">add_html_result_columns</span>: <span class="hljs-function"><span class="hljs-params">(columns)</span> -&gt;</span>
    <span class="hljs-property">@add_result_title_column</span>(columns)
    columns.push {<span class="hljs-attribute">heading</span>: <span class="hljs-property">@i18n_result_form_heading</span>(<span class="hljs-string">'html_result'</span>), <span class="hljs-attribute">source</span>: <span class="hljs-string">'result'</span>}

  <span class="hljs-attribute">add_adjusted_result_columns</span>: <span class="hljs-function"><span class="hljs-params">(columns)</span> -&gt;</span>
    <span class="hljs-property">@add_common_result_columns</span> columns, <span class="hljs-property">@get</span>(<span class="hljs-string">'result_sources'</span>), []
    columns.push {<span class="hljs-attribute">heading</span>: <span class="hljs-property">@i18n_result_form_heading</span>(<span class="hljs-string">'adjusted_result'</span>), <span class="hljs-attribute">component</span>: <span class="hljs-property">@get</span>(<span class="hljs-string">'c_form_correctable'</span>), <span class="hljs-attribute">correctable</span>: <span class="hljs-literal">true</span>}

  <span class="hljs-attribute">add_result_columns</span>: <span class="hljs-function"><span class="hljs-params">(columns)</span> -&gt;</span>
    <span class="hljs-property">@add_common_result_columns</span> columns, <span class="hljs-property">@get</span>(<span class="hljs-string">'result_sources'</span>), <span class="hljs-property">@get</span>(<span class="hljs-string">'result_observations'</span>)

  <span class="hljs-attribute">add_result_title_column</span>: <span class="hljs-function"><span class="hljs-params">(columns)</span> -&gt;</span>
    title_column = <span class="hljs-property">@result_title_column</span>()
    columns.push title_column <span class="hljs-keyword">if</span> ember.isPresent(title_column)

  <span class="hljs-attribute">add_common_result_columns</span>: <span class="hljs-function"><span class="hljs-params">(columns, sources, observations)</span> -&gt;</span>
    <span class="hljs-property">@add_result_title_column</span>(columns)</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Set the result columns in the same order as in the category.</p></div></div><div class="code"><div class="wrapper">    common_columns = <span class="hljs-property">@get_selected_category_columns</span>().filter (column) =&gt;
      sources.includes(column.source) <span class="hljs-keyword">or</span> observations.includes(column.observation)
    common_columns.forEach (column) =&gt;
      result_column = {<span class="hljs-attribute">heading</span>: column.heading}
      <span class="hljs-keyword">if</span> column.observation
        result_column.observation = column.observation
      <span class="hljs-keyword">else</span>
        result_column.source = column.source
        result_column.range  = column.range  <span class="hljs-keyword">if</span> column.range
      columns.push(result_column)

  <span class="hljs-attribute">i18n_result_form_heading</span>: <span class="hljs-function"><span class="hljs-params">(key)</span> -&gt;</span> <span class="hljs-property">@t</span>(<span class="hljs-string">"builder.lab.admin.form.result_heading.<span class="hljs-subst">#{key}</span>"</span>)</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="new-result-type-record-mock">New Result Type Record Mock.</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">  <span class="hljs-attribute">mock_new_result_record</span>: ember.Object.extend
    <span class="hljs-attribute">admin_type</span>: ember.computed.reads <span class="hljs-string">'value.type'</span>
    <span class="hljs-attribute">toString</span>: <span class="hljs-function">-&gt;</span> <span class="hljs-string">'mock_lab_result'</span>

  <span class="hljs-attribute">get_mock_new_result_record</span>: <span class="hljs-function"><span class="hljs-params">(type)</span> -&gt;</span>
    props = <span class="hljs-property">@result_type_defaults</span>()[type] <span class="hljs-keyword">or</span> {}
    <span class="hljs-property">@get</span>(<span class="hljs-string">'mock_new_result_record'</span>).create(props)

  <span class="hljs-attribute">result_type_defaults</span>: <span class="hljs-function">-&gt;</span>
    <span class="hljs-attribute">adjusted_result</span>:
      <span class="hljs-attribute">admin_is_adjusted</span>: <span class="hljs-literal">true</span>
      <span class="hljs-attribute">title</span>:    <span class="hljs-string">''</span>
      <span class="hljs-attribute">position</span>: <span class="hljs-number">0</span>
      <span class="hljs-attribute">metadata</span>:
        <span class="hljs-attribute">abnormality</span>:
          <span class="hljs-attribute">no_value</span>: <span class="hljs-literal">true</span>
        <span class="hljs-attribute">analysis</span>:
          <span class="hljs-attribute">lock_on_max_attempts</span>: <span class="hljs-literal">false</span>
          <span class="hljs-attribute">max_attempts</span>:         <span class="hljs-number">3</span>
          <span class="hljs-attribute">validate</span>:
            <span class="hljs-attribute">correct</span>: <span class="hljs-string">''</span>
            <span class="hljs-attribute">correct_method</span>: <span class="hljs-string">'standard_adjusted'</span>
      <span class="hljs-attribute">value</span>:
        <span class="hljs-attribute">type</span>: <span class="hljs-string">'adjusted_result'</span>
        <span class="hljs-attribute">columns</span>:
          <span class="hljs-attribute">ratings</span>:
            <span class="hljs-attribute">lower</span>: <span class="hljs-string">''</span>
            <span class="hljs-attribute">upper</span>: <span class="hljs-string">''</span>
          <span class="hljs-attribute">result</span>: <span class="hljs-string">''</span>
          <span class="hljs-attribute">units</span>:  <span class="hljs-string">''</span>
        <span class="hljs-attribute">description</span>: <span class="hljs-string">''</span>
        <span class="hljs-attribute">observations</span>:
          <span class="hljs-attribute">abnormality</span>:
            <span class="hljs-attribute">input_type</span>: <span class="hljs-string">'none'</span>
          <span class="hljs-attribute">analysis</span>:
            <span class="hljs-attribute">input_type</span>: <span class="hljs-string">'correctable'</span>

    <span class="hljs-attribute">html_result</span>:
      <span class="hljs-attribute">admin_is_html</span>: <span class="hljs-literal">true</span>
      <span class="hljs-attribute">title</span>:    <span class="hljs-string">''</span>
      <span class="hljs-attribute">position</span>: <span class="hljs-number">0</span>
      <span class="hljs-attribute">metadata</span>: {}
      <span class="hljs-attribute">value</span>:
        <span class="hljs-attribute">type</span>: <span class="hljs-string">'html_result'</span>
        <span class="hljs-attribute">columns</span>:
          <span class="hljs-attribute">result</span>: <span class="hljs-string">''</span>
        <span class="hljs-attribute">description</span>: <span class="hljs-string">''</span>
        <span class="hljs-attribute">observations</span>: {}

    <span class="hljs-attribute">result</span>:
      <span class="hljs-attribute">title</span>:    <span class="hljs-string">''</span>
      <span class="hljs-attribute">position</span>: <span class="hljs-number">0</span>
      <span class="hljs-attribute">metadata</span>:
        <span class="hljs-attribute">abnormality</span>:
          <span class="hljs-attribute">max_attempts</span>: <span class="hljs-number">3</span>
          <span class="hljs-attribute">validate</span>:
            <span class="hljs-attribute">correct</span>: []
        <span class="hljs-attribute">analysis</span>:
          <span class="hljs-attribute">validate</span>:
            <span class="hljs-attribute">correct</span>: <span class="hljs-string">'normal'</span>
      <span class="hljs-attribute">value</span>:
        <span class="hljs-attribute">type</span>: <span class="hljs-string">'result'</span>
        <span class="hljs-attribute">columns</span>:
          <span class="hljs-attribute">ratings</span>:
            <span class="hljs-attribute">lower</span>: <span class="hljs-string">''</span>
            <span class="hljs-attribute">upper</span>: <span class="hljs-string">''</span>
          <span class="hljs-attribute">result</span>: <span class="hljs-string">''</span>
          <span class="hljs-attribute">units</span>:  <span class="hljs-string">''</span>
        <span class="hljs-attribute">description</span>: <span class="hljs-string">''</span>
        <span class="hljs-attribute">observations</span>:
          <span class="hljs-attribute">abnormality</span>:
            <span class="hljs-attribute">input_type</span>: <span class="hljs-string">'input'</span>
          <span class="hljs-attribute">analysis</span>:
            <span class="hljs-attribute">input_type</span>: <span class="hljs-string">'select'</span>
            <span class="hljs-attribute">normal</span>:     <span class="hljs-string">'normal'</span>
            <span class="hljs-attribute">selections</span>: [
              {<span class="hljs-attribute">id</span>: <span class="hljs-string">'normal'</span>, <span class="hljs-attribute">label</span>: <span class="hljs-string">'Normal'</span>}
              {<span class="hljs-attribute">id</span>: <span class="hljs-string">'high'</span>,   <span class="hljs-attribute">label</span>: <span class="hljs-string">'High'</span>}
              {<span class="hljs-attribute">id</span>: <span class="hljs-string">'low'</span>,    <span class="hljs-attribute">label</span>: <span class="hljs-string">'Low'</span>}
            ]</div></div></div></div></body></html>