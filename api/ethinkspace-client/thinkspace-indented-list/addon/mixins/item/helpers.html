<!DOCTYPE html><html lang="en"><head><title>thinkspace-indented-list/addon/mixins/item/helpers</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../"><meta name="groc-document-path" content="thinkspace-indented-list/addon/mixins/item/helpers"><meta name="groc-project-path" content="thinkspace-indented-list/addon/mixins/item/helpers.coffee"><meta name="groc-branch-path" content="feature/pe-builder-comments"><meta name="groc-github-url" content="https://github.com/sixthedge/ethinkspace-client"><link rel="stylesheet" type="text/css" media="all" href="../../../../assets/style.css"><script type="text/javascript" src="../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/sixthedge/ethinkspace-client/blob/feature/pe-builder-comments/thinkspace-indented-list/addon/mixins/item/helpers.coffee">thinkspace-indented-list/addon/mixins/item/helpers.coffee</a></div></div><div id="document"><a href="/" class="lodestar-link">Back to Guides</a><div class="segment"><div class="code"><div class="wrapper">import ember  from <span class="hljs-string">'ember'</span>

export default ember.Mixin.create

  <span class="hljs-attribute">get_value_items_bottom_index</span>: <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">if</span> <span class="hljs-property">@value_items</span>.length &lt;= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-property">@value_items</span>.length

  <span class="hljs-attribute">get_visible_next</span>: <span class="hljs-function"><span class="hljs-params">($el)</span> -&gt;</span> $el.nextAll(<span class="hljs-string">':visible:first'</span>)
  <span class="hljs-attribute">get_visible_prev</span>: <span class="hljs-function"><span class="hljs-params">($el)</span> -&gt;</span> $el.prevAll(<span class="hljs-string">':visible:first'</span>)

  <span class="hljs-attribute">has_item_children</span>: <span class="hljs-function"><span class="hljs-params">(item)</span> -&gt;</span>
    pos_x = item.pos_x
    start = <span class="hljs-property">@value_items</span>.indexOf(item)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-keyword">unless</span> start?
    start += <span class="hljs-number">1</span>
    end    = <span class="hljs-property">@get_value_items_last_index</span>()
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-keyword">if</span> start &gt; end
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [start..end]
      child_item = <span class="hljs-property">@value_items</span>[i]
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>  <span class="hljs-keyword">if</span> child_item.pos_x &gt; pos_x 
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-keyword">if</span> child_item.pos_x &lt;= pos_x 
    <span class="hljs-literal">false</span>

  <span class="hljs-attribute">get_item_children</span>: <span class="hljs-function"><span class="hljs-params">(item, visible=<span class="hljs-literal">true</span>)</span> -&gt;</span>
    children = []
    pos_x    = item.pos_x
    start    = <span class="hljs-property">@value_items</span>.indexOf(item)
    <span class="hljs-keyword">return</span> children <span class="hljs-keyword">unless</span> start?
    start += <span class="hljs-number">1</span>
    end    = <span class="hljs-property">@get_value_items_last_index</span>()
    <span class="hljs-keyword">return</span> children <span class="hljs-keyword">if</span> start &gt; end
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [start..end]
      child_item = <span class="hljs-property">@value_items</span>[i]
      <span class="hljs-keyword">return</span> children <span class="hljs-keyword">if</span> child_item.pos_x &lt;= pos_x </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Only return visible items unless specified.</p></div></div><div class="code"><div class="wrapper">      <span class="hljs-keyword">if</span> visible
        children.push(child_item)
      <span class="hljs-keyword">else</span>
        comp         = <span class="hljs-property">@get_item_component</span>(child_item)
        item_visible = comp.get(<span class="hljs-string">'item_visible'</span>)
        children.push(child_item) <span class="hljs-keyword">unless</span> item_visible
    children

  <span class="hljs-attribute">get_item_parent</span>: <span class="hljs-function"><span class="hljs-params">(item)</span> -&gt;</span>
    pos_x = item.pos_x
    index = <span class="hljs-property">@value_items</span>.indexOf(item)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">unless</span> index &gt; <span class="hljs-number">0</span>
    end = index - <span class="hljs-number">1</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>.end]
      pi = end - i
      parent_item = <span class="hljs-property">@value_items</span>[pi]
      <span class="hljs-keyword">return</span> parent_item <span class="hljs-keyword">if</span> parent_item.pos_x &lt;= pos_x
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">if</span> pi == end
    <span class="hljs-literal">null</span>

  <span class="hljs-attribute">get_prev_item</span>: <span class="hljs-function"><span class="hljs-params">(item)</span> -&gt;</span>
    index = <span class="hljs-property">@value_items</span>.indexOf(item)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">unless</span> index &gt; <span class="hljs-number">0</span>
    <span class="hljs-property">@value_items</span>[index - <span class="hljs-number">1</span>]

  <span class="hljs-attribute">get_next_item</span>: <span class="hljs-function"><span class="hljs-params">(item)</span> -&gt;</span>
    index = <span class="hljs-property">@value_items</span>.indexOf(item)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">unless</span> index &gt;= <span class="hljs-number">0</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">if</span> index == <span class="hljs-property">@get_value_items_last_index</span>()
    <span class="hljs-property">@value_items</span>[index + <span class="hljs-number">1</span>]

  <span class="hljs-attribute">get_value_items_last_index</span>: <span class="hljs-function">-&gt;</span>
    index = <span class="hljs-property">@value_items</span>.length - <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> index &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> index <span class="hljs-keyword">else</span> <span class="hljs-number">0</span></div></div></div></div></body></html>