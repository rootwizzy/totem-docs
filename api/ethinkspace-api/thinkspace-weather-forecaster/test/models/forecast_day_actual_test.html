<!DOCTYPE html><html lang="en"><head><title>thinkspace-weather-forecaster/test/models/forecast_day_actual_test</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../"><meta name="groc-document-path" content="thinkspace-weather-forecaster/test/models/forecast_day_actual_test"><meta name="groc-project-path" content="thinkspace-weather-forecaster/test/models/forecast_day_actual_test.rb"><meta name="groc-branch-path" content="development"><meta name="groc-github-url" content="https://github.com/sixthedge/ethinkspace-api"><link rel="stylesheet" type="text/css" media="all" href="../../../assets/style.css"><script type="text/javascript" src="../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/sixthedge/ethinkspace-api/blob/development/thinkspace-weather-forecaster/test/models/forecast_day_actual_test.rb">thinkspace-weather-forecaster/test/models/forecast_day_actual_test.rb</a></div></div><div id="document"><a href="/" class="lodestar-link">Back to Guides</a><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-keyword">require</span> <span class="hljs-string">'model_helper'</span>

<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Test</span>;</span> <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">WeatherForecaster</span>;</span> <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Model</span>;</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ForecastDayActualTest</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">ActiveSupport::TestCase</span></span></span>

  <span class="hljs-keyword">include</span> <span class="hljs-constant">ModelHelper</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_actual</span><span class="hljs-params">(value=actual_val, var=score_var)</span></span>
    model.value ||= <span class="hljs-constant">Hash</span>.new
    model.value[var.to_s] = value
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">assert_check_response_score</span><span class="hljs-params">(hash, value, is_correct)</span></span>
    assert_equal actual_val,  model.value[score_var], <span class="hljs-string">"contains the actual <span class="hljs-subst">#{actual_val.inspect}</span>"</span>
    assert_equal score_var,   hash[<span class="hljs-symbol">:score_var</span>],       <span class="hljs-string">"returns the correct score_var <span class="hljs-subst">#{score_var.inspect}</span>"</span>
    assert_equal actual_val,  hash[<span class="hljs-symbol">:var_actual</span>],      <span class="hljs-string">"returns the correct actual_val for the var <span class="hljs-subst">#{actual_val.inspect}</span>"</span>
    assert_equal value,       hash[<span class="hljs-symbol">:response_value</span>],  <span class="hljs-string">"returns the correct response_value for the var <span class="hljs-subst">#{value.inspect}</span>"</span>
    assert_equal is_correct,  hash[<span class="hljs-symbol">:is_correct</span>],      <span class="hljs-string">"returns the right is_correct '<span class="hljs-subst">#{is_correct}</span>' for <span class="hljs-subst">#{value.inspect}</span>, <span class="hljs-subst">#{actual_val.inspect}</span>"</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">assert_check_value</span><span class="hljs-params">(value, is_correct=<span class="hljs-keyword">true</span>)</span></span>
    hash  = model.check_response score_var, value
    assert_check_response_score hash, value, is_correct
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">refute_check_value</span><span class="hljs-params">(value)</span>;</span> assert_check_value(value, <span class="hljs-keyword">false</span>); <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">it_no_value</span></span>
    value = <span class="hljs-keyword">nil</span>
    hash  = model.check_response score_var, value
    assert_check_response_score hash, value, <span class="hljs-keyword">false</span>
    value = []
    hash  = model.check_response score_var, value
    assert_check_response_score hash, value, <span class="hljs-keyword">false</span>
  <span class="hljs-keyword">end</span>

  describe <span class="hljs-string">'forecast day actual'</span> <span class="hljs-keyword">do</span>
    let(<span class="hljs-symbol">:model</span>) {forecast_day_actual_class.new}

    describe <span class="hljs-string">'equal logic'</span> <span class="hljs-keyword">do</span>
      before <span class="hljs-keyword">do</span>; add_actual; <span class="hljs-keyword">end</span>
        let(<span class="hljs-symbol">:score_var</span>)  {<span class="hljs-string">'equal_test'</span>}
        let(<span class="hljs-symbol">:actual_val</span>) {{<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:equal</span>, <span class="hljs-symbol">actual:</span> <span class="hljs-string">'1'</span>}}
        describe <span class="hljs-string">'is correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'single value'</span>          <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'1'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'single value in array'</span> <span class="hljs-keyword">do</span>; assert_check_value [<span class="hljs-string">'1'</span>]; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
        describe <span class="hljs-string">'is not correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'no value'</span>        <span class="hljs-keyword">do</span>; it_no_value; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'mutiple values'</span>  <span class="hljs-keyword">do</span>; refute_check_value [<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>]; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'bad value-space'</span> <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'1 '</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'bad value'</span>       <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'1x'</span>; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span> <span class="hljs-comment"># equal logic</span>

    describe <span class="hljs-string">'and logic'</span> <span class="hljs-keyword">do</span>
      before <span class="hljs-keyword">do</span>; add_actual; <span class="hljs-keyword">end</span>
        let(<span class="hljs-symbol">:score_var</span>)  {<span class="hljs-string">'and_test'</span>}
        let(<span class="hljs-symbol">:actual_val</span>) {{<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:and</span>, <span class="hljs-symbol">actual:</span> [<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>]}}
        describe <span class="hljs-string">'is correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'same order'</span>      <span class="hljs-keyword">do</span>; assert_check_value [<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>]; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'different order'</span> <span class="hljs-keyword">do</span>; assert_check_value [<span class="hljs-string">'2'</span>, <span class="hljs-string">'1'</span>]; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'more than two'</span> <span class="hljs-keyword">do</span>
            add_actual({<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:and</span>, <span class="hljs-symbol">actual:</span> [<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>]})
            value = [<span class="hljs-string">'3'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'1'</span>]
            hash  = model.check_response score_var, value
            assert_equal <span class="hljs-keyword">true</span>, hash[<span class="hljs-symbol">:is_correct</span>], <span class="hljs-string">'matches multiple values'</span>
          <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
        describe <span class="hljs-string">'is not correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'no value'</span>         <span class="hljs-keyword">do</span>; it_no_value; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'first value only'</span> <span class="hljs-keyword">do</span>; refute_check_value [<span class="hljs-string">'1'</span>]; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'last value only'</span>  <span class="hljs-keyword">do</span>; refute_check_value [<span class="hljs-string">'2'</span>]; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'extra value'</span>      <span class="hljs-keyword">do</span>; refute_check_value [<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>]; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span> <span class="hljs-comment"># and logic</span>

    describe <span class="hljs-string">'or logic'</span> <span class="hljs-keyword">do</span>
      before <span class="hljs-keyword">do</span>; add_actual; <span class="hljs-keyword">end</span>
        let(<span class="hljs-symbol">:score_var</span>)  {<span class="hljs-string">'or_test'</span>}
        let(<span class="hljs-symbol">:actual_val</span>) {{<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:or</span>, <span class="hljs-symbol">actual:</span> [<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>]}}
        describe <span class="hljs-string">'is correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'has one'</span>                  <span class="hljs-keyword">do</span>; assert_check_value [<span class="hljs-string">'1'</span>]; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'has all'</span>                  <span class="hljs-keyword">do</span>; assert_check_value [<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>]; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'has all-differenct order'</span> <span class="hljs-keyword">do</span>; assert_check_value [<span class="hljs-string">'2'</span>, <span class="hljs-string">'1'</span>]; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'more than two'</span> <span class="hljs-keyword">do</span>
            add_actual({<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:or</span>, <span class="hljs-symbol">actual:</span> [<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>]})
            value = [<span class="hljs-string">'3'</span>]
            hash  = model.check_response score_var, value
            assert_equal <span class="hljs-keyword">true</span>, hash[<span class="hljs-symbol">:is_correct</span>], <span class="hljs-string">'matches multiple values'</span>
          <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
        describe <span class="hljs-string">'is not correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'no value'</span>         <span class="hljs-keyword">do</span>; it_no_value; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'wrong value'</span>      <span class="hljs-keyword">do</span>; refute_check_value [<span class="hljs-string">'3'</span>]; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span> <span class="hljs-comment"># or logic</span>

    describe <span class="hljs-string">'range logic'</span> <span class="hljs-keyword">do</span>
      before <span class="hljs-keyword">do</span>; add_actual; <span class="hljs-keyword">end</span>
        let(<span class="hljs-symbol">:score_var</span>)  {<span class="hljs-string">'range_test'</span>}
        let(<span class="hljs-symbol">:actual_val</span>) {{<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:range</span>, <span class="hljs-symbol">actual:</span> {<span class="hljs-symbol">min:</span> <span class="hljs-string">'10'</span>, <span class="hljs-symbol">max:</span> <span class="hljs-string">'20'</span>}}}
        describe <span class="hljs-string">'is correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'is min string'</span>    <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'10'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'is min fixnum'</span>    <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-number">10</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'is max string'</span>    <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'20'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'is max fixnum'</span>    <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-number">20</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'is in range'</span>      <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'19'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'is +number'</span>       <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'+19'</span>; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
        describe <span class="hljs-string">'is not correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'no value'</span>         <span class="hljs-keyword">do</span>; it_no_value; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'below min string'</span> <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'9'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'below min fixnum'</span> <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-number">9</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'above max string'</span> <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'21'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'above max fixnum'</span> <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-number">21</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'noninteger value'</span> <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'11x'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'raises error when actual is not a hash'</span> <span class="hljs-keyword">do</span>
            add_actual({<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:range</span>, <span class="hljs-symbol">actual:</span> <span class="hljs-string">'1:3'</span>})
            e = assert_raises(forecast_day_actual_check_response_error) {assert_check_value(<span class="hljs-string">'1'</span>)}
            assert_match /range actual.*hash/i, e.to_s
          <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span> <span class="hljs-comment"># range logic</span>

    describe <span class="hljs-string">'range logic - handles negative numbers'</span> <span class="hljs-keyword">do</span>
      before <span class="hljs-keyword">do</span>; add_actual; <span class="hljs-keyword">end</span>
        let(<span class="hljs-symbol">:score_var</span>)  {<span class="hljs-string">'range_test'</span>}
        let(<span class="hljs-symbol">:actual_val</span>) {{<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:range</span>, <span class="hljs-symbol">actual:</span> {<span class="hljs-symbol">min:</span> <span class="hljs-string">'-20'</span>, <span class="hljs-symbol">max:</span> <span class="hljs-string">'-10'</span>}}}
        describe <span class="hljs-string">'is correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'is min'</span>      <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'-20'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'is max'</span>      <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'-10'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'is in range'</span> <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'-11'</span>; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
        describe <span class="hljs-string">'is not correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'below min'</span> <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'-21'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'above max'</span> <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'0'</span>; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span> <span class="hljs-comment"># range logic -</span>

    describe <span class="hljs-string">'range logic - handles positive and negative numbers'</span> <span class="hljs-keyword">do</span>
      before <span class="hljs-keyword">do</span>; add_actual; <span class="hljs-keyword">end</span>
        let(<span class="hljs-symbol">:score_var</span>)  {<span class="hljs-string">'range_test'</span>}
        let(<span class="hljs-symbol">:actual_val</span>) {{<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:range</span>, <span class="hljs-symbol">actual:</span> {<span class="hljs-symbol">min:</span> <span class="hljs-string">'-10'</span>, <span class="hljs-symbol">max:</span> <span class="hljs-string">'10'</span>}}}
        describe <span class="hljs-string">'is correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'is min'</span>      <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'-10'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'is max'</span>      <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'10'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'is in range'</span> <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'0'</span>; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
        describe <span class="hljs-string">'is not correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'below min'</span> <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'-11'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'above max'</span> <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'11'</span>; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span> <span class="hljs-comment"># range logic +/-</span>

    describe <span class="hljs-string">'range logic - only min'</span> <span class="hljs-keyword">do</span>
      before <span class="hljs-keyword">do</span>; add_actual; <span class="hljs-keyword">end</span>
        let(<span class="hljs-symbol">:score_var</span>)  {<span class="hljs-string">'range_test'</span>}
        let(<span class="hljs-symbol">:actual_val</span>) {{<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:range</span>, <span class="hljs-symbol">actual:</span> {<span class="hljs-symbol">min:</span> <span class="hljs-string">'10'</span>}}}
        describe <span class="hljs-string">'is correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'is min'</span>      <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'10'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'is any max'</span>  <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'999'</span>; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
        describe <span class="hljs-string">'is not correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'below min'</span> <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'9'</span>; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span> <span class="hljs-comment"># range logic min only</span>

    describe <span class="hljs-string">'range logic - only max'</span> <span class="hljs-keyword">do</span>
      before <span class="hljs-keyword">do</span>; add_actual; <span class="hljs-keyword">end</span>
        let(<span class="hljs-symbol">:score_var</span>)  {<span class="hljs-string">'range_test'</span>}
        let(<span class="hljs-symbol">:actual_val</span>) {{<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:range</span>, <span class="hljs-symbol">actual:</span> {<span class="hljs-symbol">max:</span> <span class="hljs-string">'10'</span>}}}
        describe <span class="hljs-string">'is correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'is max'</span>      <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'10'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'is any min'</span>  <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'-999'</span>; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
        describe <span class="hljs-string">'is not correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'above max'</span> <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'11'</span>; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span> <span class="hljs-comment"># range logic max only</span>

    describe <span class="hljs-string">'invalid logic'</span> <span class="hljs-keyword">do</span>
      before <span class="hljs-keyword">do</span>; add_actual; <span class="hljs-keyword">end</span>
      let(<span class="hljs-symbol">:score_var</span>)  {<span class="hljs-string">'raise_error_test'</span>}
      let(<span class="hljs-symbol">:actual_val</span>) {{<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:xor</span>, <span class="hljs-symbol">actual:</span> [<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>]}}
      it <span class="hljs-string">'raises error'</span> <span class="hljs-keyword">do</span>
        e = assert_raises(forecast_day_actual_check_response_error) {assert_check_value(<span class="hljs-string">'1'</span>)}
        assert_match /unknown logic value/i, e.to_s
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span> <span class="hljs-comment">#invalid logit</span>

    describe <span class="hljs-string">'handles mutiple actuals'</span> <span class="hljs-keyword">do</span>
      before <span class="hljs-keyword">do</span>
        add_actual({<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:equal</span>, <span class="hljs-symbol">actual:</span> <span class="hljs-string">'1'</span>}, <span class="hljs-string">'score_var_1'</span>)
        add_actual({<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:equal</span>, <span class="hljs-symbol">actual:</span> <span class="hljs-string">'2'</span>}, <span class="hljs-string">'score_var_2'</span>)
        add_actual({<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:equal</span>, <span class="hljs-symbol">actual:</span> <span class="hljs-string">'3'</span>}, <span class="hljs-string">'score_var_3'</span>)
        add_actual(actual_val, score_var)
      <span class="hljs-keyword">end</span>
        let(<span class="hljs-symbol">:score_var</span>)  {<span class="hljs-string">'equal_test'</span>}
        let(<span class="hljs-symbol">:actual_val</span>) {{<span class="hljs-symbol">logic:</span> <span class="hljs-symbol">:equal</span>, <span class="hljs-symbol">actual:</span> <span class="hljs-string">'0'</span>}}
        describe <span class="hljs-string">'is correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'single value'</span>          <span class="hljs-keyword">do</span>; assert_check_value <span class="hljs-string">'0'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'single value in array'</span> <span class="hljs-keyword">do</span>; assert_check_value [<span class="hljs-string">'0'</span>]; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
        describe <span class="hljs-string">'is not correct'</span> <span class="hljs-keyword">do</span>
          it <span class="hljs-string">'no value'</span>     <span class="hljs-keyword">do</span>; it_no_value; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'bad value 1'</span>  <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'1'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'bad value 2'</span>  <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'2'</span>; <span class="hljs-keyword">end</span>
          it <span class="hljs-string">'bad value 3'</span>  <span class="hljs-keyword">do</span>; refute_check_value <span class="hljs-string">'3'</span>; <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span> <span class="hljs-comment"># equal logic</span>

  <span class="hljs-keyword">end</span> <span class="hljs-comment"># main describe</span>

<span class="hljs-keyword">end</span>; <span class="hljs-keyword">end</span>; <span class="hljs-keyword">end</span>; <span class="hljs-keyword">end</span></div></div></div></div></body></html>