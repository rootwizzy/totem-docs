<!DOCTYPE html><html lang="en"><head><title>migrate/assignments/helpers/parse</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../"><meta name="groc-document-path" content="migrate/assignments/helpers/parse"><meta name="groc-project-path" content="migrate/assignments/helpers/parse.rb"><meta name="groc-branch-path" content="development"><meta name="groc-github-url" content="https://github.com/sixthedge/ethinkspace-api"><link rel="stylesheet" type="text/css" media="all" href="../../../assets/style.css"><script type="text/javascript" src="../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/sixthedge/ethinkspace-api/blob/development/migrate/assignments/helpers/parse.rb">migrate/assignments/helpers/parse.rb</a></div></div><div id="document"><a href="/" class="lodestar-link">Back to Guides</a><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Thinkspace</span>;</span> <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Migrate</span>;</span> <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Assignments</span>;</span> <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Helpers</span></span>
  <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Parse</span></span>

    <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:root_path</span>
    <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:current_assignment_path</span>
    <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:current_assignment_node</span>
    <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:space</span>
    <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:user</span>
    <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:image_prefix</span>
    <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:process_ids</span>
    <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:timeline_nodes</span>

    <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:verbose</span>
    <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:debug</span>
    <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:test_overrides</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_root_path</span><span class="hljs-params">(args)</span></span>
      <span class="hljs-variable">@root_path</span> = <span class="hljs-constant">File</span>.join(<span class="hljs-constant">Dir</span>.pwd, args)
      stop_run <span class="hljs-string">"Assignments xml path is not a directory <span class="hljs-subst">#{root_path.inspect}</span>."</span>  <span class="hljs-keyword">unless</span> <span class="hljs-constant">File</span>.directory?(root_path)
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_current_assignment_path</span><span class="hljs-params">(xml_id)</span></span>
      <span class="hljs-variable">@current_assignment_path</span> = <span class="hljs-constant">File</span>.join(root_path, xml_id)
      raise_error <span class="hljs-string">"XML assignment id <span class="hljs-subst">#{xml_id}</span> directory <span class="hljs-subst">#{current_assignment_path.inspect}</span> does not exist."</span>  <span class="hljs-keyword">unless</span> <span class="hljs-constant">File</span>.directory?(current_assignment_path)
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_timeline_nodes</span></span>
      filename = <span class="hljs-string">'timeline.xml'</span>
      path     = <span class="hljs-constant">File</span>.expand_path(<span class="hljs-string">"../<span class="hljs-subst">#{filename}</span>"</span>, root_path)
      raise_error <span class="hljs-string">"<span class="hljs-subst">#{filename.inspect}</span> at <span class="hljs-subst">#{path.inspect}</span> does not exist."</span>  <span class="hljs-keyword">unless</span> <span class="hljs-constant">File</span>.file?(path)
      doc   = parse_xml <span class="hljs-constant">File</span>.read(path)
      nodes = doc.css(<span class="hljs-string">'timeline'</span>)
      raise_error <span class="hljs-string">"No timeline found in <span class="hljs-subst">#{path.inspect}</span>."</span>  <span class="hljs-keyword">if</span> nodes.blank?
      <span class="hljs-variable">@timeline_nodes</span> = nodes
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_timeline_node_by_id</span><span class="hljs-params">(id)</span></span>
      node = timeline_nodes.css(<span class="hljs-string">"event[_id='<span class="hljs-subst">#{id.to_s}</span>']"</span>)
      node.present? ? node <span class="hljs-symbol">:</span> raise_error(<span class="hljs-string">"Timeline node id <span class="hljs-subst">#{id}</span> not found."</span>)
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_assignment_title</span><span class="hljs-params">(id)</span>;</span> get_timeline_node_by_id(id).css(<span class="hljs-string">'title'</span>).text; <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_assignment_nodes</span></span>
      filename = <span class="hljs-string">'assignments.xml'</span>
      path     = <span class="hljs-constant">File</span>.expand_path(filename, root_path)
      raise_error <span class="hljs-string">"<span class="hljs-subst">#{filename.inspect}</span> at <span class="hljs-subst">#{path.inspect}</span> does not exist."</span>  <span class="hljs-keyword">unless</span> <span class="hljs-constant">File</span>.file?(path)
      doc   = parse_xml <span class="hljs-constant">File</span>.read(path)
      nodes = doc.css(<span class="hljs-string">'assignment'</span>)
      raise_error <span class="hljs-string">"No assignments found in <span class="hljs-subst">#{path.inspect}</span>."</span>  <span class="hljs-keyword">if</span> nodes.blank?
      nodes
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_assignment_item_type_nodes</span></span>
      filename = <span class="hljs-string">'itemtypes.xml'</span>
      path     = <span class="hljs-constant">File</span>.join(current_assignment_path, filename)
      raise_error <span class="hljs-string">"<span class="hljs-subst">#{filename.inspect}</span> at path <span class="hljs-subst">#{path.inspect}</span> does not exist."</span>  <span class="hljs-keyword">unless</span> <span class="hljs-constant">File</span>.file?(path)
      doc   = parse_xml <span class="hljs-constant">File</span>.read(path)
      nodes = doc.css(<span class="hljs-string">'itemtype'</span>)
      raise_error <span class="hljs-string">"No item types found in <span class="hljs-subst">#{path.inspect}</span>."</span>  <span class="hljs-keyword">if</span> nodes.blank?
      nodes.blank? ? [] <span class="hljs-symbol">:</span> nodes
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_assignment_phase_nodes</span></span>
      filename = <span class="hljs-string">'multiphase.xml'</span>
      path     = <span class="hljs-constant">File</span>.join(current_assignment_path, filename)
      raise_error <span class="hljs-string">"<span class="hljs-subst">#{filename.inspect}</span> at path <span class="hljs-subst">#{path.inspect}</span> does not exist."</span>  <span class="hljs-keyword">unless</span> <span class="hljs-constant">File</span>.file?(path)
      doc   = parse_xml <span class="hljs-constant">File</span>.read(path)
      nodes = doc.css(<span class="hljs-string">'phase'</span>)
      raise_error <span class="hljs-string">"No phases found in <span class="hljs-subst">#{path.inspect}</span>."</span>  <span class="hljs-keyword">if</span> nodes.blank?
      nodes
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_assignment_diagnosis_nodes</span></span>
      filename = <span class="hljs-string">'diagnosis.xml'</span>
      path     = <span class="hljs-constant">File</span>.join(current_assignment_path, filename)
      raise_error <span class="hljs-string">"<span class="hljs-subst">#{filename.inspect}</span> at path <span class="hljs-subst">#{path.inspect}</span> does not exist."</span>  <span class="hljs-keyword">unless</span> <span class="hljs-constant">File</span>.file?(path)
      nodes = parse_xml <span class="hljs-constant">File</span>.read(path)
      raise_error <span class="hljs-string">"No item types found in <span class="hljs-subst">#{path.inspect}</span>."</span>  <span class="hljs-keyword">if</span> nodes.blank?
      nodes
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_phase_node</span><span class="hljs-params">(id)</span></span>
      filename = <span class="hljs-string">"phase<span class="hljs-subst">#{id}</span>.xml"</span>
      path     = <span class="hljs-constant">File</span>.join(current_assignment_path, filename)
      raise_error <span class="hljs-string">"<span class="hljs-subst">#{filename.inspect}</span> at path <span class="hljs-subst">#{path.inspect}</span> does not exist."</span>  <span class="hljs-keyword">unless</span> <span class="hljs-constant">File</span>.file?(path)
      doc  = parse_xml <span class="hljs-constant">File</span>.read(path)
      node = doc.css(<span class="hljs-string">'phase'</span>)
      raise_error <span class="hljs-string">"No phase node in path <span class="hljs-subst">#{path.inspect}</span>."</span>  <span class="hljs-keyword">if</span> node.blank?
      node
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_item_type_category</span><span class="hljs-params">(item_type)</span></span>
      raise_error <span class="hljs-string">"Item type is blank."</span>  <span class="hljs-keyword">if</span> item_type.blank?
      type = assignment_item_types.find {|it| it.type == item_type}
      raise_error <span class="hljs-string">"Item type <span class="hljs-subst">#{item_type.inspect}</span> not found."</span>  <span class="hljs-keyword">if</span> type.blank?
      type.category
    <span class="hljs-keyword">end</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="parse-helpers">Parse Helpers.</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">parse_html</span><span class="hljs-params">(content)</span></span>
      <span class="hljs-constant">Nokogiri::HTML</span>.fragment(content) <span class="hljs-keyword">do</span> |config|
        config.nonet
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">parse_xml</span><span class="hljs-params">(xml)</span></span>
      <span class="hljs-constant">Nokogiri</span>.<span class="hljs-constant">XML</span>(xml) <span class="hljs-keyword">do</span> |config|
        config.nonet
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="helpers">Helpers.</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">timestamp_title</span><span class="hljs-params">(title)</span></span>
      <span class="hljs-constant">Time</span>.now.to_s(<span class="hljs-symbol">:id</span>) + <span class="hljs-string">' '</span> + title
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">verbose?</span>;</span>         verbose.present?; <span class="hljs-keyword">end</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">debug?</span>;</span>           debug.present?; <span class="hljs-keyword">end</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_overrides?</span>;</span>  test_overrides.present?; <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_message</span><span class="hljs-params">(message=<span class="hljs-string">''</span>)</span></span>
      puts <span class="hljs-string">'[ts-migrate] '</span> + message
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_debug</span><span class="hljs-params">(message=<span class="hljs-string">''</span>, options={})</span></span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">unless</span> debug?
      message = <span class="hljs-string">'[debug]----: '</span> + message
      <span class="hljs-keyword">if</span> options.blank?
        message = message + <span class="hljs-string">"\n"</span> + debug_message_ids + <span class="hljs-string">"\n"</span> + debug_message_nodes
      <span class="hljs-keyword">else</span>
        message += <span class="hljs-string">' '</span>  + debug_message_ids     <span class="hljs-keyword">if</span> options[<span class="hljs-symbol">:ids</span>] == <span class="hljs-keyword">true</span>
        message += <span class="hljs-string">"\n"</span> + debug_message_nodes   <span class="hljs-keyword">if</span> options[<span class="hljs-symbol">:node</span>] == <span class="hljs-keyword">true</span>
      <span class="hljs-keyword">end</span>
      puts message
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">debug_message_ids</span></span>
      ids = <span class="hljs-string">''</span>
      ids += <span class="hljs-string">"[assignment XML id: <span class="hljs-subst">#{get_node_id(current_assignment_node)}</span>]"</span>   <span class="hljs-keyword">if</span> current_assignment_node.present?
      ids += <span class="hljs-string">"[phase XML id: <span class="hljs-subst">#{get_node_id(current_phase_node)}</span>]"</span>             <span class="hljs-keyword">if</span> current_phase_node.present?
      ids
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">debug_message_nodes</span></span>
      nodes = <span class="hljs-string">''</span>
      nodes += current_assignment_node.to_s + <span class="hljs-string">"\n"</span>  <span class="hljs-keyword">if</span> current_assignment_node.present?
      nodes += current_phase_node.to_s + <span class="hljs-string">"\n"</span>       <span class="hljs-keyword">if</span> current_phase_node.present?
      nodes
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">debug_message</span><span class="hljs-params">(message=<span class="hljs-string">''</span>)</span></span>
      message + <span class="hljs-string">"\n"</span> + debug_message_ids + <span class="hljs-string">"\n"</span> + debug_message_nodes
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">stop_run</span><span class="hljs-params">(message=<span class="hljs-string">''</span>)</span></span>
      print_message <span class="hljs-string">"\n"</span>
      print_message message
      print_message <span class="hljs-string">"Run stopped."</span>
      print_message <span class="hljs-string">"\n"</span>
      exit
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">raise_error</span><span class="hljs-params">(message=<span class="hljs-string">''</span>)</span></span>
      message = debug_message(message)  <span class="hljs-keyword">if</span> debug?
      raise <span class="hljs-constant">XMLError</span>, message
    <span class="hljs-keyword">end</span>

    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XMLError</span>  <span class="hljs-inheritance">&lt; <span class="hljs-parent">StandardError</span></span>;</span> <span class="hljs-keyword">end</span>

    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ItemType</span></span>
      <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:node</span>
      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initialize</span><span class="hljs-params">(node)</span>;</span> <span class="hljs-variable">@node</span> = node; <span class="hljs-keyword">end</span>
      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">attribute</span><span class="hljs-params">(name)</span>;</span> node &amp;&amp; node.attribute(name.to_s) &amp;&amp; node.attribute(name.to_s).text; <span class="hljs-keyword">end</span>
      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">icon</span>;</span>   attribute(<span class="hljs-symbol">:icon</span>); <span class="hljs-keyword">end</span>
      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">label</span>;</span>  attribute(<span class="hljs-symbol">:label</span>); <span class="hljs-keyword">end</span>
      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">name</span>;</span>   attribute(<span class="hljs-symbol">:name</span>); <span class="hljs-keyword">end</span>
      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">style</span>;</span>  attribute(<span class="hljs-symbol">:style</span>); <span class="hljs-keyword">end</span>
      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">type</span>;</span>   name; <span class="hljs-keyword">end</span>
      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">category</span></span>
        hash         = <span class="hljs-constant">Hash</span>.new
        hash[<span class="hljs-symbol">:icon</span>]  = icon
        hash[<span class="hljs-symbol">:label</span>] = label
        hash[<span class="hljs-symbol">:name</span>]  = name
        hash[<span class="hljs-symbol">:style</span>] = style
        hash
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="space-user-space-user-helpers-need-these">Space, User, Space User helpers (need these?).</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_space</span></span>
      space_class = <span class="hljs-constant">Thinkspace::Common::Space</span>
      space_id = <span class="hljs-constant">ENV</span>[<span class="hljs-string">'SPACE_ID'</span>]
      <span class="hljs-keyword">if</span> space_id.present?
        <span class="hljs-variable">@space</span> = space_class.find_by(<span class="hljs-symbol">id:</span> space_id)
        raise_error <span class="hljs-string">"Space id <span class="hljs-subst">#{space_id}</span> not found."</span>  <span class="hljs-keyword">if</span> space.blank?
      <span class="hljs-keyword">else</span>
        create_space(space_class)
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_space</span><span class="hljs-params">(space_class)</span></span>
      space_type = <span class="hljs-constant">Thinkspace::Common::SpaceType</span>.first
      <span class="hljs-variable">@space</span>     = space_class.create(<span class="hljs-symbol">title:</span> timestamp_title(<span class="hljs-string">'Migrate Assignments Test'</span>))
      <span class="hljs-constant">Thinkspace::Common::SpaceSpaceType</span>.create(<span class="hljs-symbol">space_id:</span> space.id, <span class="hljs-symbol">space_type_id:</span> space_type.id)
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_user</span></span>
      user_class = <span class="hljs-constant">Thinkspace::Common::User</span>
      user_id = <span class="hljs-constant">ENV</span>[<span class="hljs-string">'USER_ID'</span>]
      <span class="hljs-keyword">if</span> user_id.present?
        <span class="hljs-variable">@user</span> = user_class.find_by(<span class="hljs-symbol">id:</span> user_id)
        raise_error <span class="hljs-string">"User id <span class="hljs-subst">#{user_id}</span> not found."</span>  <span class="hljs-keyword">if</span> user.blank?
      <span class="hljs-keyword">else</span>
        create_users(user_class)
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_users</span><span class="hljs-params">(user_class)</span></span>
      owner      = {<span class="hljs-symbol">email:</span> <span class="hljs-string">"owner_1@sixthedge.com"</span>,  <span class="hljs-symbol">first_name:</span> <span class="hljs-string">'owner_1'</span>,  <span class="hljs-symbol">last_name:</span> <span class="hljs-string">'Doe'</span>}
      reader     = {<span class="hljs-symbol">email:</span> <span class="hljs-string">"read_1@sixthedge.com"</span>,   <span class="hljs-symbol">first_name:</span> <span class="hljs-string">'read_1'</span>,  <span class="hljs-symbol">last_name:</span> <span class="hljs-string">'Doe'</span>}
      <span class="hljs-keyword">if</span> (<span class="hljs-variable">@user</span> = user_class.find_by(owner)).blank?
        <span class="hljs-variable">@user</span>  = user_class.create(owner)
      <span class="hljs-keyword">end</span>
      <span class="hljs-keyword">if</span> (reader_user = user_class.find_by(reader)).blank?
        reader_user  = user_class.create(reader)
      <span class="hljs-keyword">end</span>
      create_space_user(user, <span class="hljs-symbol">:owner</span>)
      create_space_user(reader_user, <span class="hljs-symbol">:read</span>)
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_space_user</span><span class="hljs-params">(u, role, s=space)</span></span>
      <span class="hljs-constant">Thinkspace::Common::SpaceUser</span>.create(
        <span class="hljs-symbol">space_id:</span> s.id,
        <span class="hljs-symbol">user_id:</span>  u.id,
        <span class="hljs-symbol">role:</span>     role.to_s,
      )
    <span class="hljs-keyword">end</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="">#</h2>
<h3 id="additional-options-image-prefix">Additional options (IMAGE_PREFIX)</h3>
<h2 id="">#</h2></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_image_prefix</span></span>
      image_prefix  = <span class="hljs-constant">ENV</span>[<span class="hljs-string">'IMAGE_PREFIX'</span>]
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">unless</span> image_prefix.present?
      image_prefix.chop! <span class="hljs-keyword">if</span> image_prefix.end_with?(<span class="hljs-string">'/'</span>)
      <span class="hljs-variable">@image_prefix</span> = image_prefix
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_remove_observation_links</span></span>
      remove_observation_links = <span class="hljs-constant">ENV</span>[<span class="hljs-string">'REMOVE_OBSERVATION_LINKS'</span>]
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">unless</span> remove_observation_links.present?
      <span class="hljs-variable">@remove_observation_links</span> = remove_observation_links == <span class="hljs-string">'true'</span> ? <span class="hljs-keyword">true</span> <span class="hljs-symbol">:</span> <span class="hljs-keyword">false</span>
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_process_ids</span></span>
      ids = <span class="hljs-constant">ENV</span>[<span class="hljs-string">'PROCESS_IDS'</span>]
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> ids.blank?
      <span class="hljs-variable">@process_ids</span> = ids.split(<span class="hljs-string">','</span>)</div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p><span class='doc-section-header'> process_ids = [&#39;1&#39;, &#39;2&#39;, &#39;10&#39; ,&#39;13&#39;]</span></p></div></div><div class="code"><div class="wrapper">    <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">end</span> <span class="hljs-comment"># module</span>

<span class="hljs-keyword">end</span>; <span class="hljs-keyword">end</span>; <span class="hljs-keyword">end</span>; <span class="hljs-keyword">end</span></div></div></div></div></body></html>